<% content_for :title, "Admin Dashboard - Aronnax School" %>

<div class="mb-8">
  <h1 class="text-4xl font-bold text-gray-800 mb-2">Admin Dashboard</h1>
  <p class="text-gray-600">Manage your school content</p>
</div>

<!-- Statistics Cards -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
  <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg shadow-lg p-6 text-white">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-blue-100 text-sm font-medium">Subjects</p>
        <p class="text-3xl font-bold"><%= @subjects_count %></p>
      </div>
      <div class="text-5xl opacity-50">ğŸ“š</div>
    </div>
  </div>

  <div class="bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg shadow-lg p-6 text-white">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-purple-100 text-sm font-medium">Chapters</p>
        <p class="text-3xl font-bold"><%= @chapters_count %></p>
      </div>
      <div class="text-5xl opacity-50">ğŸ“‘</div>
    </div>
  </div>

  <div class="bg-gradient-to-br from-pink-500 to-pink-600 rounded-lg shadow-lg p-6 text-white">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-pink-100 text-sm font-medium">Lessons</p>
        <p class="text-3xl font-bold"><%= @lessons_count %></p>
      </div>
      <div class="text-5xl opacity-50">ğŸ“</div>
    </div>
  </div>

  <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-lg shadow-lg p-6 text-white">
    <div class="flex items-center justify-between">
      <div>
        <p class="text-green-100 text-sm font-medium">Words</p>
        <p class="text-3xl font-bold"><%= @words_count %></p>
      </div>
      <div class="text-5xl opacity-50">ğŸ’¬</div>
    </div>
  </div>
</div>

<!-- Quick Actions -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
  <!-- Create New -->
  <div class="bg-white rounded-lg shadow-lg p-6">
    <h2 class="text-2xl font-bold text-gray-800 mb-4">Quick Actions</h2>
    <div class="space-y-3">
      <%= link_to new_admin_subject_path, class: "flex items-center space-x-3 p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors group" do %>
        <span class="text-2xl">â•</span>
        <div>
          <p class="font-semibold text-gray-800 group-hover:text-blue-600">Create New Subject</p>
          <p class="text-sm text-gray-600">Add a new subject to the school</p>
        </div>
      <% end %>

      <% if @subjects.any? %>
        <%= link_to new_admin_subject_chapter_path(@subjects.first), class: "flex items-center space-x-3 p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors group" do %>
          <span class="text-2xl">â•</span>
          <div>
            <p class="font-semibold text-gray-800 group-hover:text-purple-600">Create New Chapter</p>
            <p class="text-sm text-gray-600">Add a new chapter to a subject</p>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>

  <!-- Recent Activity / Navigation -->
  <div class="bg-white rounded-lg shadow-lg p-6">
    <h2 class="text-2xl font-bold text-gray-800 mb-4">Navigation</h2>
    <div class="space-y-3">
      <%= link_to subjects_path, target: "_blank", class: "flex items-center space-x-3 p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors group" do %>
        <span class="text-2xl">ğŸ‘ï¸</span>
        <div>
          <p class="font-semibold text-gray-800 group-hover:text-gray-600">View Public Site</p>
          <p class="text-sm text-gray-600">See how students see the content</p>
        </div>
      <% end %>

      <%= link_to "#", class: "flex items-center space-x-3 p-4 bg-gray-50 hover:bg-gray-100 rounded-lg transition-colors group" do %>
        <span class="text-2xl">âš™ï¸</span>
        <div>
          <p class="font-semibold text-gray-800 group-hover:text-gray-600">Settings</p>
          <p class="text-sm text-gray-600">Configure your school settings</p>
        </div>
      <% end %>
    </div>
  </div>
</div>

<!-- Subjects List -->
<div class="bg-white rounded-lg shadow-lg p-6">
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-2xl font-bold text-gray-800">All Subjects</h2>
    <%= link_to new_admin_subject_path, class: "bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-semibold transition-colors" do %>
      + New Subject
    <% end %>
  </div>

  <% if @subjects.empty? %>
    <div class="text-center py-12">
      <div class="text-6xl mb-4">ğŸ“š</div>
      <p class="text-gray-600 mb-4">No subjects yet</p>
      <%= link_to "Create your first subject", new_admin_subject_path, class: "text-blue-600 hover:text-blue-700 font-semibold" %>
    </div>
  <% else %>
    <div class="space-y-4">
      <% @subjects.each do |subject| %>
        <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
          <div class="flex items-center justify-between">
            <div class="flex-1">
              <div class="flex items-center space-x-3 mb-2">
                <%= link_to admin_subject_path(subject), class: "text-xl font-bold text-gray-800 hover:text-blue-600 transition-colors" do %>
                  <%= subject.name %>
                <% end %>
                <span class="bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded">
                  <%= pluralize(subject.chapters.count, "Ñ€Ğ¾Ğ·Ğ´Ñ–Ğ»", "Ñ€Ğ¾Ğ·Ğ´Ñ–Ğ»Ğ¸", "Ñ€Ğ¾Ğ·Ğ´Ñ–Ğ»Ñ–Ğ²") %>
                </span>
              </div>

              <!-- Chapters list -->
              <% if subject.chapters.any? %>
                <div class="ml-4 mt-2 space-y-2">
                  <% subject.chapters.each do |chapter| %>
                    <div class="flex items-center justify-between bg-gray-50 rounded p-2">
                      <div class="flex items-center space-x-2 text-sm">
                        <span>ğŸ“‘</span>
                        <%= link_to chapter.name, admin_chapter_path(chapter), class: "hover:text-blue-600 font-medium" %>
                        <span class="text-xs text-gray-400">
                          (<%= pluralize(chapter.lessons.count, "ÑƒÑ€Ğ¾Ğº", "ÑƒÑ€Ğ¾ĞºĞ¸", "ÑƒÑ€Ğ¾ĞºÑ–Ğ²") %>)
                        </span>
                      </div>
                      <div class="flex items-center space-x-1">
                        <%= link_to admin_chapter_path(chapter), class: "text-gray-600 hover:text-gray-800 text-xs px-2 py-1" do %>
                          Manage
                        <% end %>
                        <%= link_to new_admin_chapter_lesson_path(chapter), class: "text-green-600 hover:text-green-800 text-xs px-2 py-1" do %>
                          + Lesson
                        <% end %>
                        <%= link_to edit_admin_chapter_path(chapter), class: "text-blue-600 hover:text-blue-800 text-xs px-2 py-1" do %>
                          Edit
                        <% end %>
                        <%= button_to admin_chapter_path(chapter), method: :delete, data: { confirm: "Delete chapter '#{chapter.name}'?" }, class: "text-red-600 hover:text-red-800 text-xs px-2 py-1" do %>
                          Delete
                        <% end %>
                      </div>
                    </div>
                  <% end %>
                  <%= link_to new_admin_subject_chapter_path(subject), class: "inline-flex items-center space-x-1 text-xs text-purple-600 hover:text-purple-800 mt-2" do %>
                    <span>+</span>
                    <span>Add Chapter</span>
                  <% end %>
                </div>
              <% else %>
                <div class="ml-4 mt-2">
                  <%= link_to new_admin_subject_chapter_path(subject), class: "text-sm text-purple-600 hover:text-purple-800" do %>
                    + Add first chapter
                  <% end %>
                </div>
              <% end %>
            </div>

            <div class="flex items-center space-x-2">
              <%= link_to subject_path(subject), target: "_blank", class: "bg-gray-100 hover:bg-gray-200 text-gray-700 px-4 py-2 rounded-lg transition-colors" do %>
                View Public
              <% end %>
              <%= link_to admin_subject_path(subject), class: "bg-purple-100 hover:bg-purple-200 text-purple-700 px-4 py-2 rounded-lg transition-colors" do %>
                Manage
              <% end %>
              <%= link_to edit_admin_subject_path(subject), class: "bg-blue-100 hover:bg-blue-200 text-blue-700 px-4 py-2 rounded-lg transition-colors" do %>
                Edit
              <% end %>
              <%= button_to admin_subject_path(subject), method: :delete, data: { confirm: "Are you sure? This will delete all chapters and lessons!" }, class: "bg-red-100 hover:bg-red-200 text-red-700 px-4 py-2 rounded-lg transition-colors" do %>
                Delete
              <% end %>
            </div>
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>
